<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.26">
    <link rel="icon" href="./images/icons/favicon.ico"><title>Maven | atips</title><meta name="description" content="整理开发笔记、技巧、文档等">
    <link rel="preload" href="/atips/assets/js/runtime~app.006d820a.js" as="script"><link rel="preload" href="/atips/assets/css/styles.260bed4b.css" as="style"><link rel="preload" href="/atips/assets/js/8567.1b238c3e.js" as="script"><link rel="preload" href="/atips/assets/js/app.f3898035.js" as="script">
    <link rel="stylesheet" href="/atips/assets/css/styles.260bed4b.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/atips/" class=""><!----><span class="site-name">atips</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/atips/" class="nav-link" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Java 基础</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/java/basic/java-basic-oop/" class="nav-link" aria-label="Java 面向对象"><!--[--><!--]--> Java 面向对象 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/java/container/collection/java-collection-overview/" class="nav-link" aria-label="Java 集合框架"><!--[--><!--]--> Java 集合框架 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Java进阶 - 并发框架</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/java/concurrent/java-concurrent-overview/" class="nav-link" aria-label="Java 并发知识体系"><!--[--><!--]--> Java 并发知识体系 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Java进阶 - 新版本特性</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/java/java1.8/java-8-features-overview/" class="nav-link" aria-label="Java 8 特性"><!--[--><!--]--> Java 8 特性 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Java进阶 - JVM相关</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/java/jvm/java-jvm-agent-arthas/" class="nav-link" aria-label="Java 调试排错相关"><!--[--><!--]--> Java 调试排错相关 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>SQL 数据库</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/database/mysql/mysql-commands/" class="nav-link" aria-label="MySQL 数据库"><!--[--><!--]--> MySQL 数据库 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>NoSQL 数据库</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/database/nosql-redis/redis-overview/" class="nav-link" aria-label="Redis 数据库"><!--[--><!--]--> Redis 数据库 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/database/nosql-mongodb/mongodb-overview/" class="nav-link" aria-label="MongoDB 数据库"><!--[--><!--]--> MongoDB 数据库 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/database/nosql-elasticsearch/elasticsearch-overview/" class="nav-link" aria-label="Elasticsearch"><!--[--><!--]--> Elasticsearch <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="开发"><span class="title">开发</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="开发"><span class="title">开发</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>高并发架构</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/mq/mq-overview/" class="nav-link" aria-label="消息队列"><!--[--><!--]--> 消息队列 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/database/nosql-elasticsearch/elasticsearch-overview/" class="nav-link" aria-label="搜索引擎"><!--[--><!--]--> 搜索引擎 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/database/nosql-redis/redis-overview/" class="nav-link" aria-label="缓存"><!--[--><!--]--> 缓存 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="分库分表"><!--[--><!--]--> 分库分表 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="读写分离"><!--[--><!--]--> 读写分离 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>高可用架构</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="基于Hystrix"><!--[--><!--]--> 基于Hystrix <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>分布式系统</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="分布式锁"><!--[--><!--]--> 分布式锁 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="分布式事务"><!--[--><!--]--> 分布式事务 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>微服务架构</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="基于Hystrix"><!--[--><!--]--> 基于Hystrix <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring"><span class="title">Spring</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Spring"><span class="title">Spring</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/atips/spring/spring-framework/" class="nav-link" aria-label="Spring 基础"><!--[--><!--]--> Spring 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/atips/web/" class="nav-link" aria-label="Web"><!--[--><!--]--> Web <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="开发工具"><span class="title">开发工具</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="开发工具"><span class="title">开发工具</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>IDE</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/software/ide/idea/basic-course/" class="nav-link" aria-label="IDEA"><!--[--><!--]--> IDEA <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>其他</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/linux/linux-basic/" class="nav-link" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/software/vcs/git-commit/" class="nav-link" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/software/postman/" class="nav-link" aria-label="Postman"><!--[--><!--]--> Postman <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/software/maven/" class="nav-link" aria-label="Maven"><!--[--><!--]--> Maven <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/devops/docker/docker-basic/" class="nav-link" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/atips/about/about-me/" class="nav-link" aria-label="关于"><!--[--><!--]--> 关于 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="切换夜间模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/atips/" class="nav-link" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Java 基础</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/java/basic/java-basic-oop/" class="nav-link" aria-label="Java 面向对象"><!--[--><!--]--> Java 面向对象 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/java/container/collection/java-collection-overview/" class="nav-link" aria-label="Java 集合框架"><!--[--><!--]--> Java 集合框架 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Java进阶 - 并发框架</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/java/concurrent/java-concurrent-overview/" class="nav-link" aria-label="Java 并发知识体系"><!--[--><!--]--> Java 并发知识体系 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Java进阶 - 新版本特性</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/java/java1.8/java-8-features-overview/" class="nav-link" aria-label="Java 8 特性"><!--[--><!--]--> Java 8 特性 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Java进阶 - JVM相关</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/java/jvm/java-jvm-agent-arthas/" class="nav-link" aria-label="Java 调试排错相关"><!--[--><!--]--> Java 调试排错相关 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>SQL 数据库</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/database/mysql/mysql-commands/" class="nav-link" aria-label="MySQL 数据库"><!--[--><!--]--> MySQL 数据库 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>NoSQL 数据库</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/database/nosql-redis/redis-overview/" class="nav-link" aria-label="Redis 数据库"><!--[--><!--]--> Redis 数据库 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/database/nosql-mongodb/mongodb-overview/" class="nav-link" aria-label="MongoDB 数据库"><!--[--><!--]--> MongoDB 数据库 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/database/nosql-elasticsearch/elasticsearch-overview/" class="nav-link" aria-label="Elasticsearch"><!--[--><!--]--> Elasticsearch <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="开发"><span class="title">开发</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="开发"><span class="title">开发</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>高并发架构</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/mq/mq-overview/" class="nav-link" aria-label="消息队列"><!--[--><!--]--> 消息队列 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/database/nosql-elasticsearch/elasticsearch-overview/" class="nav-link" aria-label="搜索引擎"><!--[--><!--]--> 搜索引擎 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/database/nosql-redis/redis-overview/" class="nav-link" aria-label="缓存"><!--[--><!--]--> 缓存 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="分库分表"><!--[--><!--]--> 分库分表 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="读写分离"><!--[--><!--]--> 读写分离 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>高可用架构</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="基于Hystrix"><!--[--><!--]--> 基于Hystrix <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>分布式系统</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="分布式锁"><!--[--><!--]--> 分布式锁 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="分布式事务"><!--[--><!--]--> 分布式事务 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>微服务架构</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="基于Hystrix"><!--[--><!--]--> 基于Hystrix <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring"><span class="title">Spring</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Spring"><span class="title">Spring</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/atips/spring/spring-framework/" class="nav-link" aria-label="Spring 基础"><!--[--><!--]--> Spring 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/atips/web/" class="nav-link" aria-label="Web"><!--[--><!--]--> Web <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="开发工具"><span class="title">开发工具</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="开发工具"><span class="title">开发工具</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>IDE</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/software/ide/idea/basic-course/" class="nav-link" aria-label="IDEA"><!--[--><!--]--> IDEA <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>其他</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/atips/linux/linux-basic/" class="nav-link" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/software/vcs/git-commit/" class="nav-link" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/software/postman/" class="nav-link" aria-label="Postman"><!--[--><!--]--> Postman <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/software/maven/" class="nav-link" aria-label="Maven"><!--[--><!--]--> Maven <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/atips/devops/docker/docker-basic/" class="nav-link" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/atips/about/about-me/" class="nav-link" aria-label="关于"><!--[--><!--]--> 关于 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">Linux</p><ul class=""><li><!--[--><a href="/atips/linux/linux-basic.html" class="nav-link sidebar-item" aria-label="Linux - 常用"><!--[--><!--]--> Linux - 常用 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">版本控制</p><ul class=""><li><!--[--><p class="sidebar-item">Git</p><ul class="sidebar-sub-items"><li><!--[--><a href="/atips/software/vcs/git-commit.html" class="nav-link sidebar-item" aria-label="Commit Mesage 格式"><!--[--><!--]--> Commit Mesage 格式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/atips/software/vcs/git-branch.html" class="nav-link sidebar-item" aria-label="Branch 分支管理"><!--[--><!--]--> Branch 分支管理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/atips/software/vcs/git-ignore.html" class="nav-link sidebar-item" aria-label="忽略特殊文件"><!--[--><!--]--> 忽略特殊文件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/atips/software/vcs/git-flight-rules.html" class="nav-link sidebar-item" aria-label="Git 飞行规则"><!--[--><!--]--> Git 飞行规则 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">调试工具</p><ul class=""><li><!--[--><a href="/atips/software/postman.html" class="nav-link sidebar-item" aria-label="Postman"><!--[--><!--]--> Postman <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">项目管理工具</p><ul class=""><li><!--[--><a aria-current="page" href="/atips/software/maven.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Maven"><!--[--><!--]--> Maven <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/atips/software/maven.html#基础概念" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="基础概念"><!--[--><!--]--> 基础概念 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/atips/software/maven.html#坐标" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="坐标"><!--[--><!--]--> 坐标 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/atips/software/maven.html#生命周期" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="生命周期"><!--[--><!--]--> 生命周期 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/atips/software/maven.html#约定目录结构" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="约定目录结构"><!--[--><!--]--> 约定目录结构 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/atips/software/maven.html#配置文件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="配置文件"><!--[--><!--]--> 配置文件 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/atips/software/maven.html#本地仓库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="本地仓库"><!--[--><!--]--> 本地仓库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/atips/software/maven.html#设置镜像仓库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="设置镜像仓库"><!--[--><!--]--> 设置镜像仓库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/atips/software/maven.html#参考文献" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="参考文献"><!--[--><!--]--> 参考文献 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/atips/software/maven.html#jar-包冲突" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Jar 包冲突"><!--[--><!--]--> Jar 包冲突 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/atips/software/maven.html#maven-jar包管理机制" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Maven Jar包管理机制"><!--[--><!--]--> Maven Jar包管理机制 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/atips/software/maven.html#jar包冲突产生的原因" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Jar包冲突产生的原因"><!--[--><!--]--> Jar包冲突产生的原因 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/atips/software/maven.html#排查定位jar包冲突" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="排查定位Jar包冲突"><!--[--><!--]--> 排查定位Jar包冲突 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/atips/software/maven.html#解决jar包冲突的方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="解决Jar包冲突的方法"><!--[--><!--]--> 解决Jar包冲突的方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/atips/software/maven.html#参考资料" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="参考资料"><!--[--><!--]--> 参考资料 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">容器化 - Docker</p><ul class=""><li><!--[--><a href="/atips/devops/docker/docker-overview.html" class="nav-link sidebar-item" aria-label="Docker - Overview"><!--[--><!--]--> Docker - Overview <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/atips/devops/docker/docker-basic.html" class="nav-link sidebar-item" aria-label="Docker 基础"><!--[--><!--]--> Docker 基础 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/atips/devops/docker/docker-deploy-on-Linux.html" class="nav-link sidebar-item" aria-label="Docker使用 - 在Linux环境中部署"><!--[--><!--]--> Docker使用 - 在Linux环境中部署 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="maven" tabindex="-1"><a class="header-anchor" href="#maven" aria-hidden="true">#</a> Maven</h1><h2 id="基础概念" tabindex="-1"><a class="header-anchor" href="#基础概念" aria-hidden="true">#</a> 基础概念</h2><p><strong>本地仓库、远程仓库关系</strong>：</p><p><img src="//gcore.jsdelivr.net/gh/tiancixiong/atips@img-230529/images/software/image-20211028143854066.png" alt="image-20211028143854066"></p><ul><li><strong>本地仓库</strong>：</li><li><strong>私服</strong>：私服中存储了公司的内部专用的jar！不仅如此，私服还充当了中央仓库的镜像，说白了就是一个代理</li><li><strong><a href="https://repo1.maven.org/maven2/" target="_blank" rel="noopener noreferrer">中央仓库<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></strong>：该仓库存储了互联网上的 jar，由 Maven 团队来维护</li></ul><h3 id="坐标" tabindex="-1"><a class="header-anchor" href="#坐标" aria-hidden="true">#</a> 坐标</h3><p><code>groupId</code>，<code>artifactId</code>和<code>version</code>一起形成坐标的概念。坐标能够唯一确定 jar 或者 pom。</p><p>查找坐标网址：<a href="https://search.maven.org/" target="_blank" rel="noopener noreferrer"><span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>、<a href="https://mvnrepository.com/" target="_blank" rel="noopener noreferrer"><span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li><code>&lt;groupId&gt;</code>：组织名，一般是域名反写+实际项目名，如：org.springframework.boot</li><li><code>&lt;artifactId&gt;</code>：项目名，如：spring-boot-starter</li><li><code>&lt;version&gt;</code>：版本号</li><li><code>&lt;packaging&gt;</code>：打包方式</li></ul><p>其他属性：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><code>&lt;scope&gt;</code>：依赖的范围。可以控制哪些依赖在哪些 <code>classpath</code> 中可用，哪些依赖包含在一个应用中 <ul><li>compile(默认)：运行期有效，依赖在所有的 <code>classpath</code> 中可用，会被打入包中</li><li>provided：编译期有效，运行期不需要提供，不会打入包中</li><li>runtime：编译不需要，在运行期有效，需要导入包中（接口与实现分离）</li><li>test：测试需要，不会打入包中。</li><li>system：非本地仓库引入、存在系统的某个路径下的jar（一般不使用）</li></ul></li></ul><h3 id="生命周期" tabindex="-1"><a class="header-anchor" href="#生命周期" aria-hidden="true">#</a> 生命周期</h3><table><thead><tr><th>生命周期阶段</th><th>描述</th></tr></thead><tbody><tr><td><strong>validate</strong></td><td>验证项目是否正确，以及所有为了完整构建必要的信息是否可用</td></tr><tr><td>generate-sources</td><td>生成所有需要包含在编译过程中的源代码</td></tr><tr><td>process-sources</td><td>处理源代码，比如过滤一些值</td></tr><tr><td>generate-resources</td><td>生成所有需要包含在打包中的资源文件</td></tr><tr><td>process-resources</td><td>复制并处理资源文件至目标(target)目录，准备打包</td></tr><tr><td><strong>compile</strong></td><td>编译项目的源代码</td></tr><tr><td>process-classes</td><td>后处理编译生成的 class 文件，例如对Java类进行字节码增强</td></tr><tr><td>generate-test-sources</td><td>生成所有包含在测试编译过程中的测试源码</td></tr><tr><td>process-test-sources</td><td>处理测试源码，比如过滤一些值</td></tr><tr><td>generate-test-resources</td><td>生成测试需要的资源文件</td></tr><tr><td>process-test-resources</td><td>复制并处理测试资源文件至测试目标目录</td></tr><tr><td>test-compile</td><td>编译测试源码至测试目标目录</td></tr><tr><td><strong>test</strong></td><td>使用合适的单元测试框架运行测试，这些测试不需要被打包或发布</td></tr><tr><td>prepare-package</td><td>在真正的打包之前，执行一些准备打包必要的操作</td></tr><tr><td><strong>package</strong></td><td>将编译好的代码打包成可分发的格式，如 JAR，WAR</td></tr><tr><td>pre-integration-test</td><td>执行一些在集成测试运行之前需要的动作。如建立集成测试需要的环境</td></tr><tr><td>integration-test</td><td>如果有必要的话，处理包并发布至集成测试可以运行的环境</td></tr><tr><td>post-integration-test</td><td>执行一些在集成测试运行之后需要的动作。如清理集成测试环境。</td></tr><tr><td><strong>verify</strong></td><td>执行所有检查，验证包是有效的，符合质量规范</td></tr><tr><td><strong>install</strong></td><td>安装包至本地仓库，以备本地的其它项目作为依赖使用</td></tr><tr><td><strong>deploy</strong></td><td>安装包至远程仓库(私服)，共享给其他开发人员和项目</td></tr></tbody></table><p>IDEA 中 Lifecycle ：</p><ul><li><strong>clean</strong>：有问题，多清理！</li><li><strong>package</strong>：打成 Jar/War 包，会自动进行 clean+compile</li></ul><p>maven 常用构建命令：</p><p><img src="//gcore.jsdelivr.net/gh/tiancixiong/atips@img-230529/images/software/image-20211028153649935.png" alt="image-20211028153649935"></p><h3 id="约定目录结构" tabindex="-1"><a class="header-anchor" href="#约定目录结构" aria-hidden="true">#</a> 约定目录结构</h3><p>Maven 提倡使用一个共同的标准目录结构，Maven 使用约定优于配置的原则，大家尽可能的遵守这样的目录结构。如下所示：</p><ul><li><code>${basedir}</code>：存放pom.xml和所有的子目录</li><li><code>${basedir}/src/main/java</code>：项目的源代码</li><li><code>${basedir}/src/main/resources</code>：项目的资源，比如说 property、yml 文件</li><li><code>${basedir}/src/main/webapp/WEB-INF</code>：web应用文件目录，web项目的信息，比如存放web.xml、本地图片、jsp视图页面</li><li><code>${basedir}/src/test/java</code>：项目的测试类，比如说 Junit 代码</li><li><code>${basedir}/src/test/resources</code>：测试用的资源</li><li><code>${basedir}/target</code>：打包输出目录</li><li><code>${basedir}/target/classes</code>：编译输出目录</li><li><code>${basedir}/target/test-classes</code>：测试编译输出目录</li><li><code>~/.m2/repository</code>、<code>C:\Users\Administrator\.m2</code>：maven 默认的本地仓库目录位置</li></ul><p><img src="//gcore.jsdelivr.net/gh/tiancixiong/atips@img-230529/images/software/image-20211028150357970.png" alt="image-20211028150357970"></p><ul><li><code>src/main</code>：这个目录中的内容最终会打包到 Jar/War 包中 <ul><li><code>src/main/resources</code></li></ul></li><li><code>src/test</code>：测试内容，并不会打包进去</li></ul><h2 id="配置文件" tabindex="-1"><a class="header-anchor" href="#配置文件" aria-hidden="true">#</a> 配置文件</h2><p>在安装目录中找到配置文件：<code>conf/settings.xml</code></p><h3 id="本地仓库" tabindex="-1"><a class="header-anchor" href="#本地仓库" aria-hidden="true">#</a> 本地仓库</h3><p>配置<strong>本地仓库</strong>地址：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localRepository</span><span class="token punctuation">&gt;</span></span>路径<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localRepository</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="设置镜像仓库" tabindex="-1"><a class="header-anchor" href="#设置镜像仓库" aria-hidden="true">#</a> 设置镜像仓库</h3><p>设置镜像仓库，可以提高下载速度。在配置文件的 <code>&lt;mirrors&gt;&lt;/mirrors&gt;</code> 标签中添加 <code>&lt;mirror/&gt;</code> 子节点:</p><ul><li><p><a href="https://developer.aliyun.com/mvn/guide" target="_blank" rel="noopener noreferrer">阿里云公共仓库<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>aliyunmaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>阿里云公共仓库<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://maven.aliyun.com/repository/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><h3 id="参考文献" tabindex="-1"><a class="header-anchor" href="#参考文献" aria-hidden="true">#</a> 参考文献</h3><ul><li><a href="http://www.kailing.pub/PdfReader/web/viewer.html?file=mavenGuide" target="_blank" rel="noopener noreferrer">mavenGuide<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><h2 id="jar-包冲突" tabindex="-1"><a class="header-anchor" href="#jar-包冲突" aria-hidden="true">#</a> Jar 包冲突</h2><p>Jar 包冲突表现往往有这几种：</p><ul><li>程序抛出 <code>java.lang.ClassNotFoundException</code> 异常；</li><li>程序抛出 <code>java.lang.NoSuchMethodError</code> 异常；</li><li>程序抛出 <code>java.lang.NoClassDefFoundError</code> 异常；</li><li>程序抛出 <code>java.lang.LinkageError</code> 异常等；</li></ul><h3 id="maven-jar包管理机制" tabindex="-1"><a class="header-anchor" href="#maven-jar包管理机制" aria-hidden="true">#</a> Maven Jar包管理机制</h3><h4 id="依赖传递原则" tabindex="-1"><a class="header-anchor" href="#依赖传递原则" aria-hidden="true">#</a> 依赖传递原则</h4><p>当在 Maven 项目中引入 A 的依赖，A 的依赖通常又会引入 B 的 jar 包，B 可能还会引入 C 的 jar 包。这样，当你在 pom.xml 文件中添加了 A 的依赖，Maven 会自动的帮你把所有相关的依赖都添加进来。</p><p>这样的好处是，使用起来就非常方便，不用自己挨个去找依赖 Jar 包了。坏处是会引起 Jar 包冲突。</p><h4 id="最短路径优先原则" tabindex="-1"><a class="header-anchor" href="#最短路径优先原则" aria-hidden="true">#</a> 最短路径优先原则</h4><p>规则内容：（有多个依赖时）主要根据依赖的<strong>路径长短</strong>来决定引入哪个依赖。</p><p>举例说明：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>依赖链路一：A -&gt; X -&gt; Y -&gt; Z(v1.1)
依赖链路二：B -&gt; Q -&gt; Z(v1.2)
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>项目中同时引入了 A 和 B 两个依赖，它们间接都引入了 Z 依赖，但由于 B 的依赖链路比较短，因此最终生效的是Z(v1.2) 版本。这就是最短路径优先原则。</p><p>此时如果 Z 的 v1.2 版本和 v1.2 版本区别较大，那么就会发生 Jar 包冲突的表现。</p><h4 id="最先声明优先原则" tabindex="-1"><a class="header-anchor" href="#最先声明优先原则" aria-hidden="true">#</a> 最先声明优先原则</h4><p>规则内容：如果两个依赖的路径一样，最短路径优先原则是无法进行判断的。此时需要使用<strong>最先声明优先原则</strong>，也就是说，谁的声明在前则优先选择。</p><p>举例说明：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>依赖链路一：A -&gt; X -&gt; Z(v1.2)
依赖链路二：B -&gt; Q -&gt; Z(v1.1)
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>A 和 B 最终都依赖 Z，此时 A 的声明（pom.xml 中引入的顺序）优先于 B，则针对冲突的 Z 会优先引入 Z(v1.2)。</p><p>如果 Z(v1.2) 向下兼容 Z(v1.1)，则不会出现 Jar 包冲突问题。但如果将 B 声明放前面，则有可能会发生 Jar 包冲突。</p><h3 id="jar包冲突产生的原因" tabindex="-1"><a class="header-anchor" href="#jar包冲突产生的原因" aria-hidden="true">#</a> Jar包冲突产生的原因</h3><p>上面讲了 Maven 维护 Jar 包的三个原则，其实每个原则会发生什么样的 Jar 包冲突。</p><p>举例说明：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>依赖链路一：A -&gt; B -&gt; C -&gt; G21(v21.0)
依赖链路二：D -&gt; F -&gt; G20(v20.0)
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>假设项目中同时引入了 A 和 D 的依赖，按照依赖传递机制和默认依赖调节机制（第一：路径最近者优先；第二：第一声明优先），默认会引入 G20 版本的 Jar 包，而 G21 的 Jar 包不会被引用。</p><p>如果 C 中的方法使用了 G21 版本中的某个新方法（或类），由于 Maven 的处理，导致 G21 并未被引入。此时，程序在调用对应类时便会抛出 <code>ClassNotFoundException</code> 异常；调用对应方法时便会抛出 <code>NoSuchMethodError</code> 异常。</p><h3 id="排查定位jar包冲突" tabindex="-1"><a class="header-anchor" href="#排查定位jar包冲突" aria-hidden="true">#</a> 排查定位Jar包冲突</h3><p>在高版本的 IDEA 中已经自带了 Maven 依赖管理插件，依次执行：打开 pom.xml 文件，在文件内右击，选择Maven，选择 Show Dependencies 即可查看 Maven 的依赖层级结构：</p><p><img src="//gcore.jsdelivr.net/gh/tiancixiong/atips@img-230529/images/software/image-20211026151051714.png" alt="image-20211026151051714"></p><p>在图中可以清楚的看到都使用了哪些依赖，它们的层级，是否有冲突的 jar 包等。冲突部分会用红色标出，同时标出 Maven 默认选择了哪个版本。</p><p>如果你的IDEA版本中默认没有Maven管理插件，也可安装 <a href="https://plugins.jetbrains.com/plugin/7179-maven-helper/" target="_blank" rel="noopener noreferrer">Maven Helper<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>，通过这块插件来帮你分析Jar包冲突。</p><p>安装完插件，重启之后，打开 pom.xml 文件，在文件下面的 <em>Dependency Analyzer</em> 视图中便可以看到 Jar 包冲突的结果分析：</p><p><img src="//gcore.jsdelivr.net/gh/tiancixiong/atips@img-230529/images/software/image-20211026162032598.png" alt="image-20211026162032598"></p><p>此时，关于哪些 Jar 包冲突了，便一目了然。同时，可以右击冲突的 Jar 包，执行 <strong>Exclude</strong> 进行排除，在pom.xml中便会自动添加排除jar包的 <code>&lt;exclusion&gt;</code> 标签：</p><p><img src="//gcore.jsdelivr.net/gh/tiancixiong/atips@img-230529/images/software/image-20211026170132602.png" alt="image-20211026170132602"></p><h3 id="解决jar包冲突的方法" tabindex="-1"><a class="header-anchor" href="#解决jar包冲突的方法" aria-hidden="true">#</a> 解决Jar包冲突的方法</h3><p>这里基于 Maven 项目介绍几种场景下解决Jar冲突的方法：</p><ul><li>Maven 默认处理：采用此种方法，要牢记 Maven 依赖调节机制的基本原则，路径最近者优先和第一声明优先；</li><li>排除法：上面 Maven Helper 的实例中已经讲到，可以将冲突的 Jar 包在 pom.xml 中通过 <code>&lt;exclusion&gt;</code> 标签来进行排除；</li><li>版本锁定法：如果项目中依赖同一 Jar 包的很多版本，一个个排除非常麻烦，此时可用<strong>版本锁定法</strong>，即直接明确引入指定版本的依赖。根据前面介绍 Maven 处理 Jar 包基本原则，此种方式的优先级最高。这种方法一般采用上面我们讲到的<strong>如何统一 Jar 包依赖</strong>的方式。</li></ul><h4 id="依赖排除" tabindex="-1"><a class="header-anchor" href="#依赖排除" aria-hidden="true">#</a> 依赖排除</h4><p>去掉间接引入的jar包，在 pom.xml 中使用 <code>&lt;exclusion&gt;</code> 标签去排除冲突的 jar 包（上面利用插件 Maven Helper 中的 execlude 方法其实等同于该方法）</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><br><br><br><div class="highlight-line"> </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><hr><p>对于本地环境可以利用 Maven Helper 等插件来解决，但在预生产或生成环境中就没那么方便了。此时可以通过<code>mvn</code> 命令来定位突出的细节。</p><p>执行如下 <code>mvn</code> 命令，注意不要省略 <code>-Dverbose</code>，要不然不会显示被忽略的包：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mvn dependency:tree -Dverbose
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>输出内容：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-dependency-plugin:2.1:tree <span class="token punctuation">(</span>default-cli<span class="token punctuation">)</span> @ euler-foundation ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> com.hsit:euler-foundation:jar:0.9.0.1-SNAPSHOT
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> +- com.rop:rop:jar:1.0.1:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- org.slf4j:slf4j-api:jar:1.7.5:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- org.slf4j:slf4j-log4j12:jar:1.7.5:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- log4j:log4j:jar:1.2.16:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- commons-lang:commons-lang:jar:2.6:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- commons-codec:commons-codec:jar:1.6:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- javax.validation:validation-api:jar:1.0.0.GA:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- org.hibernate:hibernate-validator:jar:4.2.0.Final:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- org.codehaus.jackson:jackson-core-asl:jar:1.9.5:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.5:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- org.codehaus.jackson:jackson-jaxrs:jar:1.9.5:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  +- org.codehaus.jackson:jackson-xc:jar:1.9.5:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>  <span class="token punctuation">\</span>- com.fasterxml.jackson.dataformat:jackson-dataformat-xml:jar:2.2.3:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>     +- com.fasterxml.jackson.core:jackson-core:jar:2.2.3:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>     +- com.fasterxml.jackson.core:jackson-annotations:jar:2.2.3:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>     +- com.fasterxml.jackson.core:jackson-databind:jar:2.2.3:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>     +- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.2.3:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>     <span class="token punctuation">\</span>- org.codehaus.woodstox:stax2-api:jar:3.1.1:compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token operator">|</span>        <span class="token punctuation">\</span>- javax.xml.stream:stax-api:jar:1.0-2:compile
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>加上参数 <code>Dincludes</code> 或者 <code>Dexcludes</code> 制定小包含或者排除的包，参数后使用 <code>groupId:artifactId:version</code> 格式传值，dependency:tree 就会帮你过滤出来：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mvn dependency:tree -Dverbose -Dincludes=org.springframework:spring-tx
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h3><ul><li><a href="https://mp.weixin.qq.com/s/Eu2SmJKC7LLkk9DnGzyM6w" target="_blank" rel="noopener noreferrer">解决 Maven Jar 包冲突<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> - 公众号@日拱一兵</li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/tiancixiong/atips/edit/master/docs/software/maven.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><span class="meta-item-info">2024/7/1 12:20:12</span></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: tiancixiong@163.com">Tianci.Xiong</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: tiancixiong@163.com">TianCi.Xiong</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/atips/assets/js/runtime~app.006d820a.js" defer></script><script src="/atips/assets/js/8567.1b238c3e.js" defer></script><script src="/atips/assets/js/app.f3898035.js" defer></script>
  </body>
</html>
